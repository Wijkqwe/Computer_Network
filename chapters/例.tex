
\chapter{例}

\section{体系结构}

\subsubsection{存储转发机制2010\_34}
在采用“存储-转发”方式的分组交换网络中，所有速率的数据传输速率为100Mbit/s，分组大小为1000B，其中分组头大小20B，若主机H1向主机H2发送一个大小为980000B的文件，则在不考虑分组拆装时间和传播延时的情况下，从H1发送开始到H2接收完成为止，需要的时间至少为

\subparagraph{解}
需要\(\dfrac{980000}{1000 - 20} = 1000\)个分组，当\(t = \dfrac{1M * 8}{100Mbps} = 80ms\)时，H1发送完毕。 \\
由于传输延时，H1发送完成时，还有两个未到达，最短路径经过2个交换机转发到达目的地。每次转发时间\(t_0 = \dfrac{1K * 8}{100Mbps} = 0.08ms\)。 \\
综上，至少\(80.16\)ms。


\section{数据链路层}

\subsubsection{GBN协议}
数据链路层采用GBN协议，发送方发送了编号为0-7的帧。当计计时器超时时，若发送方仅收到0，2，3确认帧，则发送方应重传的帧数为

\subparagraph{解}
连续ARQ协议中，接收方采用累积确认，收到3确认帧代表0，1，2，3已收到，未收到1代表确认帧返回过程丢失了，不代表1帧未到达接收方。故需重传4，5，6，7。


\subsubsection{以太网交换机}
以太网交换机进行转发决策时使用的PDU地址为

\subparagraph{解}
交换机工作在数据链路层，数据链路层使用物理地址进行转发，转发通常根据目的地址决定出端口。



\subsubsection{CSMA/CD}
在一个采用CSMA/CD协议的网络中，传输介质是一根完整电缆，传输速率为1Gbps，电缆中信号传播速度为200000km/s。若最小数据帧长度减少800bit，则最远两个站点之间距离至少需要：

\subparagraph{解}
若最短帧长减少，而数据传输速率不变，则需是冲突域最大距离变短来实现争用期减少。争用期为网络中收发的\textbf{往返时延}。设减少的最小距离s，则有\(2 * \dfrac{s}{2 * 10^8} = \dfrac{800}{10^9}\)，得s=80。


\section{网络层}

\subsubsection{子网划分}
某网络IP地址空间为192.168.5.0/24，采用定长子网划分，子网掩码为255.255.255.248，则该网络中最大子网数，每个子网内最大可分配地址个数为

\subparagraph{解}
网络号为前24位。子网掩码25-32位的\(248_2 = 11111000\)，故前5位用于子网号，后3位用于主机号。未使用CIDR，故不能使用全0全1。因此该网络空间的最大子网个数为\(2^5 = 32\)，每个子网内的最大可分配地址个数为\(2^3 - 2 = 6\)


\subsubsection{最大主机数}
在子网192.168.4.0/30中，能接收目的地址为192.168.4.3的IP分组的最大主机数是?

\subparagraph{解}
首先分析192.168.4.0/30这个网络。主机号占两位，地址范围192.168.4.0/30~192.168.4.3/30，即可以容纳（4-2=2）个主机。主机位为全1时，即192.168.4.3，是广播地址，因此网内所有主机都能收到，故2个。


\section{传输层}

\subsubsection{TCP流量控制拥塞控制}
主机甲乙之间已建立一个TCP连接，TCP最大段长度为1000B，若主机甲当前拥塞窗口为4000B，在甲向乙连续发送两个最大段后，成功收到乙发送的对第一个段的确认段，确认段中通告的接收窗口大小为2000B，则此甲可以向乙发送的最大字节数是

\subparagraph{解}
发送窗口为MIN\{4000, 2000\}=2000B，发送方还没收到第二个段确认，故还可发送2000 - 1000 = 1000B


