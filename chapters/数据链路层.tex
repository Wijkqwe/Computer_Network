
\chapter{数据链路层}

\section{功能}

使用物理层提供的\textbf{比特传输}服务；

为网络层提供服务，将网络层的\textbf{IP数据报（分组）}封装称帧，发送给下一结点；


\paragraph{物理链路}
传输介质（0层）+ 物理层（1层）实现相邻结点之间物理链路

\paragraph{逻辑链路}
数据链路层基于物理链路，实现相邻结点之间逻辑上无差错的“数据链路（逻辑链路）”


\subsection{封装成帧（组帧）}

\subsubsection{帧定界}
如何让接收方确定帧的界限


\subsubsection{透明传输}
接收方能够去除帧定界的附加信息


\subsubsection{字符计数法}
每个帧的开头用一个\textbf{定长计数字段}表示帧长。

帧长 = 定长计数字段长度 + 数据部分长度

缺点：任一计数字段出错，会导致后续所有帧无法定界。


\subsubsection{字节填充法}
使用控制字符SOH表示帧开始，EOT表示结束。

若帧的数据部分包含特殊字符（控制字符SOH、EOT，转义字符ESC），则发送方在特殊字符前添加转义字符ESC；接收方做逆处理。


\subsubsection{零比特填充法}
使用特殊比特串`01111110`表示帧开始/结束。

发送方对帧数据部分进行处理，每遇到连续的5个1，填充一个0；接收方做逆处理，每遇到连续的5个1，删除一个0.

HDLC协议、PPP协议使用。


\subsubsection{违规编码法}
违规编码基于曼彻斯特编码IEEE，上跳0下跳1，看中间，中必变。

需要物理层配合。

若周期中间不跳变，则违规。


\subsection{差错控制}

\paragraph{目标}
发现并解决一个帧内部的“位错”。


\subsubsection{检错编码}
接收方\textbf{发现比特错}后丢弃帧，通知发送方重传帧。

\paragraph{奇偶校验码}
整个校验码（有效信息位+校验位）中1的个数。
\begin{itemize}
    \item 奇校验码：1的个数为奇数；
    \item 偶校验码：1的个数为偶数；
\end{itemize}
\subparagraph{偶校验硬件实现}
各信息位进行\textbf{异或}运算，结果为偶校验位。将偶校验的信息位、校验位异或，结果为0则没有错误。

仅能检测处奇数位错误，无纠错能力。


\paragraph{CRC码（循环冗余校验）}
发送接收方约定一个“除数”，K信息位、R校验位作为“被除数”，添加校验位后保证除法余数为0。

\subparagraph{构造}
设生成多项式\(G(x)\)，R位数为\(G(x)\)最高次幂，二进制码为多项式系数。信息位左移R位，对二进制码进行模2除法，得到余数即除数，除数有R + 1位。

\subparagraph{纠错}
\begin{itemize}
    \item 可检测所有奇数个错误
    \item 可检测所有双比特错误
    \item 可检测所有小于等于校验位长度的连续错误
    \item 若选择合适多项式，且\(2^R >= K + R + 1\)，则可纠正单比特错
\end{itemize}


\subsubsection{纠错编码}



\subsection{可靠传输}



\subsection{流量控制}



\subsection{介质访问控制}



